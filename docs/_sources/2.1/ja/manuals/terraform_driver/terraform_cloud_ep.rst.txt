.. _terraform_cloud_ep_top:

=========================
Terraform Cloud/EP driver
=========================

はじめに
========

| 本書では、Exastro IT Automation（以下、ITAとも記載する）の Terraform Cloud/EP driver 機能および操作方法について説明します。
| Terraform や Terraform driverの概要および、Terraform CLI driver と共通の機能については「:ref:`terraform_common_top`」を参照してください。

コンソールメニュー構成
======================

| 本章では、Terraform Cloud/EP driverで利用するのメニュー構成について説明します。

メニュー/画面一覧
-----------------

#. | **基本コンソールのメニュー**
   | Terraform Cloud/EP driverで利用する基本コンソールのメニュー一覧を以下に記述します。

   .. list-table:: 基本コンソール メニュー/画面一覧
      :widths: 1 2 2 5
      :header-rows: 1
      :align: left

      * - No
        - メニューグループ
        - メニュー/画面
        - 説明
      * - 1
        - 基本コンソール
        - オペレーション一覧
        - オペレーション一覧をメンテナンス(閲覧/登録/更新/廃止)できます。


#. | **Terraform Cloud/EP driverのメニュー**
   | Terraform Cloud/EP driverのメニュー一覧を以下に記述します。

   .. table::  Terraform Cloud/EP driver メニュー/画面一覧 
      :widths: 1 2 2 5
      :align: left

      +-------+--------------+--------------+----------------------------------------+
      | **N\  | **メニュー\  | **メニュー\  | **説明**                               |
      | o**   | グループ**   | ・画面**     |                                        |
      +=======+==============+==============+========================================+
      | 1     | Terraform \  | インター\    | ITAと連携するTerraform\                |
      |       | Cloud/EP     | フェース情報 | の情報を管理します。                   |
      +-------+              +--------------+----------------------------------------+
      | 2     |              | Organizatio\ | Terraformで利用するOrganization\       |
      |       |              | n管理        | の情報を管理します。                   |
      +-------+              +--------------+----------------------------------------+
      | 3     |              | Workspace\   | Terraformで利用するWorkspace\          |
      |       |              | 管理         | の情報を管理します。                   |
      +-------+              +--------------+----------------------------------------+
      | 4     |              | Movement\    | Movementの一覧を管理します。           |
      |       |              | 一覧         |                                        |
      +-------+              +--------------+----------------------------------------+
      | 5     |              | Module\      | Moduleファイルを管理します。           |
      |       |              | 素材集       |                                        |
      +-------+              +--------------+----------------------------------------+
      | 6     |              | Policy管理   | Policyファイルを管理します。           |
      |       |              |              |                                        |
      +-------+              +--------------+----------------------------------------+
      | 7     |              | Policy \     | Policy Setを管理します                 |
      |       |              | set管理      | Policy SetはPolicyおよび。\            |
      |       |              |              | Workspaceと紐づけることで、\           |
      |       |              |              | 作業実行時に対象のWorkspace\           |
      |       |              |              | に対してPolicyを有効にします。\        |
      +-------+              +--------------+----------------------------------------+
      | 8     |              | Policy \     | PolicySetとPolicyの紐付け\             |
      |       |              | set-Policy\  | を管理します。                         |
      |       |              | 紐付         |                                        |
      +-------+              +--------------+----------------------------------------+
      | 9     |              | Policy \     | PolicySetとWorkspaceの紐付け\          |
      |       |              | set-Work\    | を管理します。                         |
      |       |              | space紐付    |                                        |
      +-------+              +--------------+----------------------------------------+
      | 10    |              | Movement-\   | MovementとModule素材の関連付け\        |
      |       |              | Module紐付   | を管理します。                         |
      |       |              |              |                                        |
      +-------+              +--------------+----------------------------------------+
      | 11    |              | 変数ネスト\  | Module素材集で登録したtfファイル\      |
      |       |              | 管理         | で定義されている変数のタイプが\        |
      |       |              |              | list,setかつ、その変数の中で\          |
      |       |              |              | list,set,tuple,objectが定義\           |
      |       |              |              | されている場合、メンバー変数\          |
      |       |              |              | の最大繰返数を管理します。             |
      +-------+              +--------------+----------------------------------------+
      | 12    |              | 代入値自動\  | パラメータシートのメニューに登録\      |
      |       |              | 登録設定     | されているオぺレーション毎の項目\      |
      |       |              |              | や値を紐付けるMovementと変数\          |
      |       |              |              | を管理します。                         |
      +-------+              +--------------+----------------------------------------+
      | 13    |              | 作業実行     | 作業実行するMovementとオペレーション\  |
      |       |              |              | を選択し実行を指示します。             |
      +-------+              +--------------+----------------------------------------+
      | 14    |              | 作業管理     | 作業実行履歴を管理します。             |
      |       |              |              |                                        |
      +-------+              +--------------+----------------------------------------+
      | 15    |              | 作業状態確認 | 作業実行状態を表示します。             |
      |       |              |              |                                        |
      +-------+              +--------------+----------------------------------------+
      | 16    |              | 代入値管理   | 変数の代入値を管理します。             |
      |       |              |              |                                        |
      +-------+              +--------------+----------------------------------------+
      | 17    |              | 連携先\      | ITAと連携されているTerraformに\        |
      |       |              | Terraform\   | 登録されているOrganization, Workspace\ |
      |       |              | 管理         | ,Policy,PolicySetの一覧表示および\     |
      |       |              |              | 削除をすることができます。             |
      +-------+              +--------------+----------------------------------------+
      | 18    |              | Module-変数\ | Module変数とModule素材の紐付\          |
      |       |              | 紐付\        | を管理します。                         |
      |       |              | (※1)         |                                        |
      +-------+              +--------------+----------------------------------------+
      | 19    |              | メンバー\    | メンバー変数を管理します。             |
      |       |              | 変数管理\    |                                        |
      |       |              | (※1)         |                                        |
      +-------+              +--------------+----------------------------------------+
      | 20    |              | Movement-\   | Movmentと変数の紐付を管理します。      |
      |       |              | 変数紐付\    |                                        |
      |       |              | (※1)         |                                        |
      +-------+              +--------------+----------------------------------------+
      | 21    |              | Movement-\   | Movmentとメンバー変数の紐付\           |
      |       |              | メンバー\    | を管理します。                         |
      |       |              | 変数紐付\    |                                        |
      |       |              | (※1)         |                                        |
      +-------+--------------+--------------+----------------------------------------+

   .. note::
      | ※1 非表示メニューは、内部機能でデータの登録・更新を行うメニューです。
      | Terraform Cloud/EP driver機能をインストールした状態では表示されないメニューに設定されています。
      | 非表示メニューを表示するには、:menuselection:`管理コンソール-->ロール・メニュー紐付管理` で各メニューの復活処理を行います。詳細は :doc:`../it_automation_base/management_console` を参照してください。


利用手順
========

| 各Terraform Cloud/EP メニューの利用手順について説明します

Terraform Cloud/EP 作業フロー
-----------------------------

| Terraform Cloud/EP driver の各メニューにおける標準的な作業フローは以下のとおりです。
| 各作業の詳細は次項に記載しています。

.. figure:: /images/ja/terraform_cloud_ep_driver/common/work_flow.png
   :align: left
   :width: 600px
   :alt: 作業フロー

-  **作業フロー詳細と参照先**

   #. | **投入オペレーション名の登録**
      | 基本コンソールのオペレーション一覧の画面から、作業用の投入オペレーション名を登録します。
      | 詳細は :ref:`terraform_cloud_ep_operation_list` を参照してください。

   #. | **インターフェース情報の設定**
      | ITAと連携するTerraformの情報を登録します。
      | 詳細は :ref:`terraform_cloud_ep_interface_information` を参照してください。

   #. | **Organizationの登録と連携** 
      | Terraformで利用するOrganizationの情報を登録し、Terraformとの連携を行います。
      | 詳細は :ref:`terraform_cloud_ep_organization_list` を参照してください。

   #. | **Workspaceの登録と連携** 
      | Terraformで利用するWorkspaceの情報を登録し、Terraformとの連携を行います。
      | 詳細は :ref:`terraform_cloud_ep_workspace_list` を参照してください。

   #. | **Movementの登録** 
      | 作業用のMovementを登録します。
      | 詳細は :ref:`terraform_cloud_ep_movement_list` を参照してください。

   #. | **Module素材の登録** 
      | 作業で実行するModuleファイルを登録します。
      | 詳細は :ref:`terraform_cloud_ep_module_list` を参照してください。

   #. | **Policyの登録（必要に応じて実施）**
      | 作業実行前に行うPolicyCheckで実行するPolicyファイルを登録します。
      | 詳細は :ref:`terraform_cloud_ep_policy_list` を参照してください。

   #. | **Policy setの登録（必要に応じて実施）**
      | Policyを適用するWorkspaceと紐付けるためのPolicy setを登録します。
      | 詳細は :ref:`terraform_cloud_ep_policyset_list` を参照してください。

   #. | **Policy setにPolicyを紐付け（必要に応じて実施）**
      | Policy setとPolicyの紐付けを登録します。
      | 詳細は :ref:`terraform_cloud_ep_policyset_policy_link` を参照してください。
   
   #. | **Policy setにWorkspaceを紐付け（必要に応じて実施）**
      | Policy setとWorkspaceの紐付けを登録します。
      | 詳細は :ref:`terraform_cloud_ep_policyset_workspace_link` を参照してください。

   #. | **MovementにModule素材を指定**
      | 登録したMovementにModule素材を指定します。
      | 詳細は :ref:`terraform_cloud_ep_movement_module_link` を参照してください。

   #. | **最大繰返数の設定（必要に応じて実施）**
      | 変数およびメンバー変数の最大繰返数を設定します。
      | 詳細は :ref:`terraform_cloud_ep_nested_variable` を参照してください。
   
   #. | **パラメータシートの作成（必要に応じて実施）**
      | パラメータシート作成の「パラメータシート定義・作成」の画面から、作業対象サーバの設定に使用するデータを登録するためのパラメータシートを作成します。
      | Module素材に定義した変数に具体値を設定する際に必要となります。
      | 詳細は :doc:`../create_param/menu_creation` を参照してください。

   #. | **パラメータシートにデータを登録（必要に応じて実施）**
      | 入力用メニューグループの前項で作成したパラメータシート画面から、作業対象サーバの設定に使用するデータを登録します。
      | Module素材に定義した変数に具体値を設定する際に必要となります。
      | 詳細は :doc:`../create_param/menu_creation` を参照してください。

   #. | **代入値自動登録設定（必要に応じて実施）** 
      | 代入値自動登録設定の画面から、パラメータシートに登録されているオペレーション毎の項目の設定値と、Movementの変数を紐付けます。
      | Module素材に定義した変数に具体値を設定する際に必要となります。
      | 詳細は :ref:`terraform_cloud_ep_substitution_value_auto_registration_setting` を参照してください。

   #. | **作業実行** 
      | 作業実行の画面から、Movementと投入オペレーションを選択して処理の実行を行います。
      | 詳細は :ref:`terraform_cloud_ep_execution` を参照してください。

   #. | **作業状態確認** 
      | 作業状態確認の画面から、実行した作業の状態がリアルタイムで表示されます。また、作業の緊急停止や、実行ログ、エラーログを監視することができます。
      | 詳細は :ref:`terraform_cloud_ep_check_operation_status` を参照してください。

   #. | **作業履歴確認** 
      | 作業管理の画面から、実行した作業の一覧が表示され履歴が確認できます。
      | 詳細は :ref:`terraform_cloud_ep_execution_list` を参照してください。
 

Policyの適用
============

Policy/PolicySet/Workspaceの紐付けについて
------------------------------------------
| **Policy機能の利用は、連携先Terraformが Terraform Enterprise もしくは Terraform Cloudで「Policy & Security」機能が有効なプランである必要があります。**
|
| Policyを適用させるために、Policyに関する各設定登録をした後に紐付設定をする必要があります。

| 最初に :ref:`terraform_cloud_ep_policy_list` で登録したPolicyと :ref:`terraform_cloud_ep_policyset_list` で登録したPolicy setを
| :ref:`terraform_cloud_ep_policyset_policy_link` にて紐付けをします。

| 次に :ref:`terraform_cloud_ep_workspace_list` で登録したTerraform Workspaceと :ref:`terraform_cloud_ep_policyset_list` で登録したPolicy setを
| :ref:`terraform_cloud_ep_policyset_workspace_link` にて紐付けをします。

| 作業実行時にMovementに紐付いたWorkspaceに対し、Policy setとそれに紐付けられたPolicyが適用されます。

.. figure:: /images/ja/terraform_cloud_ep_driver/common/policy_setting.png
   :align: left
   :width: 800px
   :alt: Policyの適用


機能・操作方法説明
==================

| 本章では、Terraform Cloud/EP driver で利用する各メニューの機能について説明します。

基本コンソール
--------------

| 本節では、基本コンソールでの操作について記載します。
| 本作業は :doc:`../it_automation_base/basic_console` を参照して、基本コンソール画面内で作業を実施してください。

.. _terraform_cloud_ep_operation_list:

オペレーション一覧
******************

| :menuselection:`基本コンソール-->オペレーション一覧` では、オーケストレータで実行するオペレーションを管理します。作業は基本コンソール内メニューより選択します。
| 登録方法の詳細は、関連マニュアルの :doc:`../it_automation_base/basic_console` を参照してください。

.. figure:: /images/ja/basic_console/operation_list/register.png
   :width: 800px
   :alt: サブメニュー画面（オペレーション一覧）

   サブメニュー画面（オペレーション一覧）


Terraform Cloud/EP メニュー
-----------------------------

| 本節では、Terraform Cloud/EP driver のメニューでの操作について記載します。

.. _terraform_cloud_ep_interface_information:

インターフェース情報
********************

#. | :menuselection:`Terraform Cloud/EP-->インターフェース情報` では、ITAと連携するTerraformの情報をメンテナンス（閲覧/更新）することができます。
   | 連携対象となるTerraformのHostnameと、TerraformのUserが発行したUserTokenが必要となります。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/interface_information_menu.png
      :width: 800px
      :alt: サブメニュー画面（インタフェース情報）

      サブメニュー画面（インタフェース情報）

#. | :guilabel:`編集` ボタンより、インターフェース情報の登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/interface_information_register.gif
      :width: 800px
      :alt: 登録画面（インタフェース情報）

      登録画面（インタフェース情報）

#. | インタフェース情報画面の項目一覧は以下のとおりです。
   | インタフェース情報が未登録または、複数レコード登録されている状態で作業実行した場合、作業実行は想定外エラーとなります。

   .. table:: 登録画面項目一覧（インタフェース情報）
      :widths: 1 1 1 4 1 1 1
      :align: left

      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | **項目**                          | **説明**                     | **入力\   | **入力方法** | **制約事項**    |
      |                                   |                              | 必須**    |              |                 |
      |                                   |                              |           |              |                 |
      +=================+========+========+==============================+===========+==============+=================+
      |  連携先Terra\   | Protocol        | ITAが連携する対象\           | ○         | 手動入力     | ー              |
      |  form           |                 | であるTerraformのプロトコル\ |           |              |                 |
      |                 |                 | を http/https どちらを入力\  |           |              |                 |
      |                 |                 | します。\                    |           |              |                 |
      |                 |                 | 通常httpsとなります。        |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | Hostname        | ITAが連携する対象\           | ○         | 手動入力     | 最大長\         |
      |                 |                 | であるTerraformのHostname\   |           |              | 256バイト       |
      |                 |                 | を入力します。               |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | Port            | ITAが連携する対象\           | ー        | 手動入力     | 最小値1         |
      |                 |                 | であるTerraformのPort\       |           |              | 最大値65535     |
      |                 |                 | を入力します。               |           |              |                 |
      |                 |                 | 通常空欄となります。         |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | User Token      | Terraformの UserSettings \   | ー        | 手動入力     | 最大長\         |
      |                 |                 | より発行したUser Token\      |           |              | 1024バイト      |
      |                 |                 | を入力します。               |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 |                 | User Tokenの発行方法は\      |           |              |                 |
      |                 |                 | 構成・構築ガイド Terraform \ |           |              |                 |
      |                 |                 | Cloud/EP の「:ref:`configu\  |           |              |                 |
      |                 |                 | ration_terraform_cloud_ep_\  |           |              |                 |
      |                 |                 | initial_setting`」を参照\    |           |              |                 |
      |                 |                 | してください。               |           |              |                 |
      |                 |                 |                              |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      |  Proxy          | Address         | プロキシサーバのアドレス\    | ー        | 手動入力     | ー              |
      |                 |                 | を入力します。               |           |              |                 |
      |                 |                 | ITAがプロキシ環境下にある\   |           |              |                 |
      |                 |                 | 場合、Terraformまでの疎通\   |           |              |                 |
      |                 |                 | のために設定が必要な場合\    |           |              |                 |
      |                 |                 | があります。                 |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | Port            | プロキシサーバのポートを入\  | ー        | 手動入力     | ー              |
      |                 |                 | 力します。                   |           |              |                 |
      |                 |                 |                              |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | NULL連携                          | 代入値自動登録設定でパラメ\  | ○         | リスト選択   | ー              |
      |                                   | ータシートの具体値がNULL\    |           |              |                 |
      |                                   | (空白)の場合に、代入値管理\  |           |              |                 |
      |                                   | への登録をNULL(空白)の値で\  |           |              |                 |
      |                                   | 行うか設定します。代入値自\  |           |              |                 |
      |                                   | 動登録設定メニューの「NULL\  |           |              |                 |
      |                                   | 連携」が空白の場合この値が\  |           |              |                 |
      |                                   | 適用されます。               |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | 状態監視周期（単位ミリ秒）        | 「:ref:`terraform_cloud_ep\  | ○         | 手動入力     | 最小値1000\     |
      |                                   | _check_operation_status`」\  |           |              | ミリ秒          |
      |                                   | 表示されるログのリフレッ\    |           |              |                 |
      |                                   | シュ間隔を入力します。通常\  |           |              |                 |
      |                                   | は3000ミリ秒程度が推奨値\    |           |              |                 |
      |                                   | です。                       |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | 進行状態表示桁数                  | 「:ref:`terraform_cloud_ep\  | ○         | 手動入力     | ー              |
      |                                   | _check_operation_status`」\  |           |              |                 |
      |                                   | での進行ログ・エラーログの\  |           |              |                 |
      |                                   | 最大表示行数を入力します。   |           |              |                 |
      |                                   |                              |           |              |                 |
      |                                   | ステータスが[未実\           |           |              |                 |
      |                                   | 行]、[準備中]、[実行中]、[\  |           |              |                 |
      |                                   | 実行中(遅延)]の場合、指定し\ |           |              |                 |
      |                                   | た行数でログを出力します。   |           |              |                 |
      |                                   |                              |           |              |                 |
      |                                   | ステータス\                  |           |              |                 |
      |                                   | が[完了]、[完了(異常)]、[想\ |           |              |                 |
      |                                   | 定外エラー]、[緊急停止]、[\  |           |              |                 |
      |                                   | 未実行(予約)]、[予約取消]の\ |           |              |                 |
      |                                   | 場合、指定した行数ではなく\  |           |              |                 |
      |                                   | すべてのログを出力します。   |           |              |                 |
      |                                   |                              |           |              |                 |
      |                                   | 環境毎にチュ\                |           |              |                 |
      |                                   | ーニングを要しますが、通常\  |           |              |                 |
      |                                   | は1000行程度が推奨値です。   |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | 備考                              | 自由記述欄です。             | ー        | 手動入力     | 最大長\         |
      |                                   |                              |           |              | 4000バイト      |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+

.. _terraform_cloud_ep_organization_list:

Organization管理
****************

#. | :menuselection:`Terraform Cloud/EP-->Organization管理` では、Terraformで利用するOrganizationについてのメンテナンス（閲覧/登録/更新/廃止）を行います。
   | また、ITAに登録したOrganizationをTerraformへの連携（登録/更新/削除）をすることができます。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/organization_list_menu.png
      :width: 800px
      :alt: サブメニュー画面（Organization管理）

      サブメニュー画面（Organization管理）

#. | :guilabel:`＋ 登録` ボタンより、Organization情報の登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/organization_list_register.gif
      :width: 800px
      :alt: 登録画面（Organization管理）

      登録画面（Organization管理）

#. | Organizationを「登録」した後、「状態チェック」ボタンをクリックすると、「:ref:`terraform_cloud_ep_interface_information`」 に登録した連携先Terraformへの連携状態を確認できます。
   | カラムグループ「Terraform連携」の「登録」「更新」「削除」ボタンをクリックすることで、連携先Terraformに対しOrganizationの登録/更新/削除が実行されます。
   | OrganizationがTerraformに連携（登録）されていない状態で作業実行した場合、\ **作業実行は想定外エラーとなります**\ 。

   | 「6.2.1インターフェース情報」で登録した「Hostname」および「UserToken」に誤りがあると、Terraformとの連携が失敗し、連携状態に以下のメッセージが表示されます。
   | 『Terraformとの接続に失敗しました。インターフェース情報を確認して下さい。』

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/organization_list_terraform_link.gif
      :width: 800px
      :alt: Terraform連携（Organization管理）

      Terraform連携（Organization管理）

#. | Organization管理画面の項目一覧は以下のとおりです。

   .. table:: 登録画面項目一覧（Organization管理）
      :widths: 1 1 1 4 1 1 1
      :align: left

      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | **項目**                          | **説明**                     | **入力\   | **入力方法** | **制約事項**    |
      |                                   |                              | 必須**    |              |                 |
      |                                   |                              |           |              |                 |
      +=================+========+========+==============================+===========+==============+=================+
      | Organization名                    | Organizationの名前を入力\    | ○         | 手動入力     | 最大長40バイト  |
      |                                   | します。                     |           |              |                 |
      |                                   |                              |           |              |                 |
      |                                   | 半角英数字と記号 _ -（アン\  |           |              |                 |
      |                                   | ダーバーとハイフン）のみ利\  |           |              |                 |
      |                                   | 用可能です。                 |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | Email address                     | OrganizationのEmail address\ | ○         | 手動入力     | 最大長128バイト |
      |                                   | を入力します。               |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | Terraform連携   | 状態チェック    | 対象のOrganizationと連携先\  | ー        | ボタン       | ー              |
      |                 |                 | Terraformとの連携状態を。\   |           |              |                 |
      |                 |                 | チェックします。             |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 |                 | ボタン押下後、ポップアップ\  |           |              |                 |
      |                 |                 | メッセージにて状態が表示\    |           |              |                 |
      |                 |                 | されます。                   |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | 登録            | 連携先TerraformへOrganizati\ | ー        | ボタン       | ー              |
      |                 |                 | onの登録を実行するボタン\    |           |              |                 |
      |                 |                 | です。                       |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | 更新            | 連携先Terraformに登録済みの\ | ー        | ボタン       | ー              |
      |                 |                 | Organizationに対し、Email \  |           |              |                 |
      |                 |                 | addressに変更があった場合\   |           |              |                 |
      |                 |                 | に更新を実行するボタンです。 |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | 削除            | 連携先Terraformに登録済みの\ | ー        | ボタン       | ー              |
      |                 |                 | Organizationの削除を実行す\  |           |              |                 |
      |                 |                 | るボタンです。               |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 |                 | ※削除したOrganizationは元\   |           |              |                 |
      |                 |                 | に戻すことができません。\    |           |              |                 |
      |                 |                 | また、Organization配下に\    |           |              |                 |
      |                 |                 | あるWorkspaceも削除されま\   |           |              |                 |
      |                 |                 | す。                         |           |              |                 |
      |                 |                 |                              |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | 備考                              | 自由記述欄です。             | ー        | 手動入力     | 最大長\         |
      |                                   |                              |           |              | 4000バイト      |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+


.. _terraform_cloud_ep_workspace_list:

Workspace管理
*************

#. | :menuselection:`Terraform Cloud/EP-->Workspace管理` では、Terraformで利用するWorkspaceについてのメンテナンス（閲覧/登録/更新/廃止）を行います。
   | また、ITAに登録したWorkspaceをTerraformへの連携（登録/更新/削除）とリソース削除（terraform destroy）を実行することができます。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/workspace_list_menu.png
      :width: 800px
      :alt: サブメニュー画面（Workspace管理）

      サブメニュー画面（Workspace管理）

#. | :guilabel:`＋ 登録` ボタンより、Workspace情報の登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/workspace_list_register.gif
      :width: 800px
      :alt: 登録画面（Workspace管理）

      登録画面（Workspace管理）

#. | Workspaceを「登録」した後、「状態チェック」ボタンをクリックすると、「:ref:`terraform_cloud_ep_interface_information`」 に登録した連携先Terraformへの連携状態を確認できます。
   | カラムグループ「Terraform連携」の「登録」「更新」「削除」ボタンをクリックすることで、連携先Terraformに対しWorkspaceの登録/更新/削除が実行されます。
   | WorkspaceがTerraformに連携（登録）されていない状態で作業実行した場合、\ **作業実行は想定外エラーとなります**\ 。

   | 「6.2.1インターフェース情報」で登録した「Hostname」および「UserToken」に誤りがあると、Terraformとの連携が失敗し、連携状態に以下のメッセージが表示されます。
   | 『Terraformとの接続に失敗しました。インターフェース情報を確認して下さい。』
   | また、選択したOrganizationがTerraformに連携（登録）されていない場合も同様のメッセージが表示されます。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/workspace_list_terraform_link.gif
      :width: 800px
      :alt: Terraform連携（Workspace管理）

      Terraform連携（Workspace管理）

#. | 「リソース削除」ボタンをクリックすると「:ref:`terraform_cloud_ep_check_operation_status`」に遷移し、対象のWorkspaceに対してリソース削除(terraform destroy)が実行されます。

#. | Workspace管理画面の項目一覧は以下のとおりです。

   .. table:: 登録画面項目一覧（Workspace管理）
      :widths: 1 1 1 4 1 1 1
      :align: left

      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | **項目**                          | **説明**                     | **入力\   | **入力方法** | **制約事項**    |
      |                                   |                              | 必須**    |              |                 |
      |                                   |                              |           |              |                 |
      +=================+========+========+==============================+===========+==============+=================+
      | Organization名                    | 「:ref:`terraform_cloud_ep\  | ○         | リスト選択   | 最大長40バイト  |
      |                                   | _organization_list`」にて\   |           |              |                 |
      |                                   | 登録したOrganization名を\    |           |              |                 |
      |                                   | 選択します。                 |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | Workspace名                       | Workspaceの名前を入力\       | ○         | 手動入力     | 最大長90バイト  |
      |                                   | します。                     |           |              |                 |
      |                                   |                              |           |              |                 |
      |                                   | 半角英数字と記号 _ -（アン\  |           |              |                 |
      |                                   | ダーバーとハイフン）のみ利\  |           |              |                 |
      |                                   | 用可能です。                 |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | Terraform version                 | Terraformのバージョンを入力\ | ○         | 手動入力     | 最大長128バイト |
      |                                   | します。空欄の場合は連携\    |           |              |                 |
      |                                   | （登録）時に最新のバージョ\  |           |              |                 |
      |                                   | ンが自動的に適用されます。   |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | Terraform連携   | 状態チェック    | 対象のWorkspaceと連携先\     | ー        | ボタン       | ー              |
      |                 |                 | Terraformとの連携状態を。\   |           |              |                 |
      |                 |                 | チェックします。             |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 |                 | ボタン押下後、ポップアップ\  |           |              |                 |
      |                 |                 | メッセージにて状態が表示\    |           |              |                 |
      |                 |                 | されます。                   |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | 登録            | 連携先TerraformへWorkspace\  | ー        | ボタン       | ー              |
      |                 |                 | の登録を実行するボタン\      |           |              |                 |
      |                 |                 | です。                       |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | 更新            | 連携先Terraformに登録済みの\ | ー        | ボタン       | ー              |
      |                 |                 | Workspaceに対し、Terraform \ |           |              |                 |
      |                 |                 | versionに変更があった場合\   |           |              |                 |
      |                 |                 | に更新を実行するボタンです。 |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | 削除            | 連携先Terraformに登録済みの\ | ー        | ボタン       | ー              |
      |                 |                 | Workspaceの削除を実行す\     |           |              |                 |
      |                 |                 | るボタンです。               |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 |                 | ※Workspaceを削除すると\      |           |              |                 |
      |                 |                 | リソースの削除は実行する\    |           |              |                 |
      |                 |                 | ことができません。削除した\  |           |              |                 |
      |                 |                 | Workspaceは元に戻すことが\   |           |              |                 |
      |                 |                 | できません。                 |           |              |                 |
      |                 |                 |                              |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | 作業実行        | リソース削除    | Workspaceごとに構成・管理\   | ー        | ボタン       | ー              |
      |                 |                 | されたリソースの削除を実行\  |           |              |                 |
      |                 |                 | するボタンです。             |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 |                 | クリックすると確認ダイアロ\  |           |              |                 |
      |                 |                 | グが表示され[OK]をクリック\  |           |              |                 |
      |                 |                 | すると「:ref:`terraform_cl\  |           |              |                 |
      |                 |                 | oud_ep_check_operation_stat\ |           |              |                 |
      |                 |                 | us`」に遷移し、対象のWorksp\ |           |              |                 |
      |                 |                 | aceごとに構成・管理された\   |           |              |                 |
      |                 |                 | リソースの削除が実行され\    |           |              |                 |
      |                 |                 | ます。                       |           |              |                 |
      |                 |                 |                              |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | 備考                              | 自由記述欄です。             | ー        | 手動入力     | 最大長\         |
      |                                   |                              |           |              | 4000バイト      |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+

.. _terraform_cloud_ep_movement_list:

Movement一覧
************

#. | :menuselection:`Terraform Cloud/EP-->Movement一覧` では、Movement名についてのメンテナンス（閲覧/登録/更新/廃止）を行います。
   | MovementはTerraform利用情報としてOrganization:Workspaceと紐付ける必要があるため、先に「:ref:`terraform_cloud_ep_organization_list`」「:ref:`terraform_cloud_ep_workspace_list`」にて対象を登録しておく必要があります。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/movement_list_menu.png
      :width: 800px
      :alt: サブメニュー画面（Movement一覧）

      サブメニュー画面（Movement一覧）

#. | :guilabel:`＋ 登録` ボタンより、Movement情報の登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/movement_list_register.gif
      :width: 800px
      :alt: 登録画面（Movement一覧）

      登録画面（Movement一覧）

#. | Movement一覧画面の項目は以下の通りです。

   .. table:: 登録画面項目一覧（Movement一覧）
      :widths: 2 2 4 1 1 1
      :align: left

      +-----------------------+-----------+-----------+-----------+-----------+
      | 項目                  | 説明      | 入力必須  | 入\       | 制\       |
      |                       |           |           | 力形式    | 約事項    |
      +=======================+===========+===========+===========+===========+
      | Movement名            | Mov\      | ○         | 手動入力  | 最大長\   |
      |                       | ementの名\|           |           | 256バイト |
      |                       | 称を入力\ |           |           |           |
      |                       | します。  |           |           |           |
      +-----------+-----------+-----------+-----------+-----------+-----------+
      | オーケストレータ      | 『\       | ー        | 自動入力  | ー        |
      |                       | Terrafor\ |           |           |           |
      |                       | m Cloud/E\|           |           |           |
      |                       | P』が自動\|           |           |           |
      |                       | で入力さ\ |           |           |           |
      |                       | れます。  |           |           |           |
      +-----------+-----------+-----------+-----------+-----------+-----------+
      | 遅延タイマー          | Mov\      | ー        | 手動入力  | ー        |
      |                       | ementが指\|           |           |           |
      |                       | 定期間遅\ |           |           |           |
      |                       | 延した場\ |           |           |           |
      |                       | 合にステ\ |           |           |           |
      |                       | ータスを\ |           |           |           |
      |                       | 遅延とし\ |           |           |           |
      |                       | て警告表\ |           |           |           |
      |                       | 示したい\ |           |           |           |
      |                       | 場合に指\ |           |           |           |
      |                       | 定期間(1\ |           |           |           |
      |                       | ～)を入力\|           |           |           |
      |                       | します。  |           |           |           |
      |                       | (単位:分)\|           |           |           |
      |                       |           |           |           |           |
      |                       | 未入力の\ |           |           |           |
      |                       | 場合は警\ |           |           |           |
      |                       | 告表示し\ |           |           |           |
      |                       | ません。  |           |           |           |
      +-----------+-----------+-----------+-----------+-----------+-----------+
      | Terra\    | Organ\    | 「:ref:`\ | ○         | リスト選\ |           |
      | formm\    | ization:\ | terrafor\ |           | 択        |           |
      | 利用情報  | Workspace | m_cloud_\ |           |           |           |
      |           |           | ep_works\ |           |           |           |
      |           |           | pace_l\   |           |           |           |
      |           |           | ist`」\   |           |           |           |
      |           |           | にて登録\ |           |           |           |
      |           |           | した（Or\ |           |           |           |
      |           |           | ganizat\  |           |           |           |
      |           |           | ionと紐\  |           |           |           |
      |           |           | 付く）Wo\ |           |           |           |
      |           |           | rkspace\  |           |           |           |
      |           |           | を選択\   |           |           |           |
      |           |           | します。  |           |           |           |
      |           |           |           |           |           |           |
      +-----------+-----------+-----------+-----------+-----------+-----------+
      | 備考                  | 自由記述\ | ー        | 手動入力  | 最大長4\  |
      |                       | 欄です。  |           |           | 000バイト |
      +-----------------------+-----------+-----------+-----------+-----------+

.. _terraform_cloud_ep_module_list:

Module素材集
************

#. | :menuselection:`Terraform Cloud/EP-->Module素材集` ではユーザーが作成したModuleのメンテナンス（閲覧/登録/更新/廃止）を行います。
   | Moduleの記述などに関しては、「:ref:`terraform_common_module_description`」を参照してください。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/module_list_menu.png
      :width: 800px
      :alt: サブメニュー画面（Module素材集）

      サブメニュー画面（Module素材集）

#. | :guilabel:`＋ 登録` ボタンより、Movement情報の登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/module_list_register.gif
      :width: 800px
      :alt: 登録画面（Module素材集）

      登録画面（Module素材集）

#. | Module素材集の項目一覧は以下のとおりです。

   .. list-table:: 登録画面項目一覧（Module素材集）
      :widths: 2 4 1 1 2
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
        - 入力必須
        - 入力方式
        - 制約事項
      * - Module素材名
        - ITAで管理するModule素材名を入力します。
        - ○
        - 手動入力
        - 最大長255バイト
      * - Module素材
        - 作成したModule素材をアップロードします。
        - ○
        - ファイル選択
        - 最大サイズ100メガバイト
      * - 備考
        - 自由記述欄です。
        - ー
        - 手動入力
        - 最大長4000バイト

.. warning:: | **Moduleファイル（.tf拡張子のファイル）内に定義した変数を取り出すタイミング**
   | 内部の処理で登録したModuleファイル（.tf拡張子のファイル）内に定義している変数を抜出します。
   | 抜出した変数は、「:ref:`terraform_cloud_ep_substitution_value_auto_registration_setting`」で具体値の登録が可能になります。
   | 抜出するタイミングはリアルタイムではありませんので、「:ref:`terraform_cloud_ep_substitution_value_auto_registration_setting`」で変数が扱えるまでに **時間がかかる** 場合があります。

.. _terraform_cloud_ep_policy_list:

Policy管理
**********

#. | :menuselection:`Terraform Cloud/EP-->Policy管理` ではユーザーが作成したPolicyのメンテナンス（閲覧/登録/更新/廃止）を行います。
   | Moduleの記述などに関しては、「:ref:`terraform_common_policy_description`」を参照してください。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/policy_list_menu.png
      :width: 800px
      :alt: サブメニュー画面（Policy管理）

      サブメニュー画面（Policy管理）

#. | :guilabel:`＋ 登録` ボタンより、Policyの登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/policy_list_register.gif
      :width: 800px
      :alt: 登録画面（Policy管理）

      登録画面（Policy管理）

#. | Policy管理の項目一覧は以下のとおりです。

   .. list-table:: 登録画面項目一覧（Policy管理）
      :widths: 2 4 1 1 2
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
        - 入力必須
        - 入力方式
        - 制約事項
      * - Policy名
        - | ITAで管理するPolicy名を入力します。
          | 半角英数字と記号 _ -（アンダーバーとハイフン）のみ利用可能です。
        - ○
        - 手動入力
        - 最大長255バイト
      * - Policy素材
        - 作成したPolicyファイルをアップロードします。
        - ○
        - ファイル選択
        - 最大サイズ100メガバイト
      * - 備考
        - 自由記述欄です。
        - ー
        - 手動入力
        - 最大長4000バイト

.. _terraform_cloud_ep_policyset_list:

Policy Set管理
**************

#. | :menuselection:`Terraform Cloud/EP-->Policy set管理` ではPolicy setのメンテナンス（閲覧/登録/更新/廃止）を行います。
   | Policy Setは「:ref:`terraform_cloud_ep_policyset_policy_link`」「:ref:`terraform_cloud_ep_policyset_workspace_link`」にてPolicyおよびWorkspaceと紐付けることで、作業実行時にWorkspaceに対してPolicyを適用させます。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/policyset_list_menu.png
      :width: 800px
      :alt: サブメニュー画面（Policy set管理）

      サブメニュー画面（Policy set管理）

#. | :guilabel:`＋ 登録` ボタンより、Policy setの登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/policyset_list_register.gif
      :width: 800px
      :alt: 登録画面（Policy set管理）

      登録画面（Policy set管理）

#. | Policy set管理の項目一覧は以下のとおりです。

   .. list-table:: 登録画面項目一覧（Policy set管理）
      :widths: 2 4 1 1 2
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
        - 入力必須
        - 入力方式
        - 制約事項
      * - Policy set名
        - | ITAで管理するPolicy set名を入力します。
          | 半角英数字と記号 _ -（アンダーバーとハイフン）のみ利用可能です。
        - ○
        - 手動入力
        - 最大長255バイト
      * - 備考
        - 自由記述欄です。
        - ー
        - 手動入力
        - 最大長4000バイト

.. _terraform_cloud_ep_policyset_policy_link:

Policy set-Policy紐付
*********************

#. | :menuselection:`Terraform Cloud/EP-->Policy set-Policy紐付` では、「:ref:`terraform_cloud_ep_policyset_list`」にて登録したPolicy setと「:ref:`terraform_cloud_ep_policy_list`」にて登録したPolicyの紐付けについてメンテナンス（閲覧/登録/更新/廃止）を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/policyset_policy_link_menu.png
      :width: 800px
      :alt: サブメニュー画面（Policy set-Policy紐付）

      サブメニュー画面（Policy set-Policy紐付）

#. | :guilabel:`＋ 登録` ボタンより、Policy set-Policy紐付の登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/policyset_policy_link_register.gif
      :width: 800px
      :alt: 登録画面（Policy set-Policy紐付）

      登録画面（Policy set-Policy紐付）

#. | Policy set-Policy紐付の項目一覧は以下のとおりです。

   .. list-table:: 登録画面項目一覧（Policy set-Policy紐付）
      :widths: 2 4 1 1 2
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
        - 入力必須
        - 入力方式
        - 制約事項
      * - Policy set名
        - | 「:ref:`terraform_cloud_ep_policyset_list`」にて登録したPolicy set名を選択します。
        - ○
        - リスト選択
        - ー
      * - Policy名
        - | 「:ref:`terraform_cloud_ep_policy_list`」にて登録したPolicy名を選択します。
        - ○
        - リスト選択
        - ー
      * - 備考
        - 自由記述欄です。
        - ー
        - 手動入力
        - 最大長4000バイト

.. _terraform_cloud_ep_policyset_workspace_link:

PolicySet-Workspace紐付
***********************

#. | :menuselection:`Terraform Cloud/EP-->Policy set-Workspace紐付` では、「:ref:`terraform_cloud_ep_policyset_list`」にて登録したPolicy setと「:ref:`terraform_cloud_ep_workspace_list`」にて登録したWorkspaceの紐付けについてメンテナンス（閲覧/登録/更新/廃止）を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/policyset_workspace_link_menu.png
      :width: 800px
      :alt: サブメニュー画面（Policy set-Workspace紐付）

      サブメニュー画面（Policy set-Workspace紐付）

#. | :guilabel:`＋ 登録` ボタンより、Policy set-Policy紐付の登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/policyset_workspace_link_register.gif
      :width: 800px
      :alt: 登録画面（Policy set-Workspace紐付）

      登録画面（Policy set-Workspace紐付）

#. | Policy set-Workspace紐付の項目一覧は以下のとおりです。

   .. list-table:: 登録画面項目一覧（Policy set-Workspace紐付）
      :widths: 2 4 1 1 2
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
        - 入力必須
        - 入力方式
        - 制約事項
      * - Policy set名
        - | 「:ref:`terraform_cloud_ep_policyset_list`」にて登録したPolicy set名を選択します。
        - ○
        - リスト選択
        - ー
      * - Workspace名
        - | 「:ref:`terraform_cloud_ep_workspace_list`」にて登録した（Organizationと紐付く）Workspace名を選択します。
        - ○
        - リスト選択
        - ー
      * - 備考
        - 自由記述欄です。
        - ー
        - 手動入力
        - 最大長4000バイト

.. _terraform_cloud_ep_movement_module_link:

Movement-Module紐付
*******************

#. | :menuselection:`Terraform Cloud/EP-->Movement-Module紐付` では、「:ref:`terraform_cloud_ep_movment_list`」にて登録したMovementと「:ref:`terraform_cloud_ep_module_list`」にて登録したModule素材の紐付けについてメンテナンス（閲覧/登録/更新/廃止）を行います。
   | Movementを実行する際、紐付けたModule素材が適用されます。
   | Movementに対して複数のModule素材を紐付けることが可能です。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/movement_module_link_menu.png
      :width: 800px
      :alt: サブメニュー画面（Movement-Module紐付）

      サブメニュー画面（Movement-Module紐付）

#. | :guilabel:`＋ 登録` ボタンより、Movement-Module紐付の登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/movement_module_link_register.gif
      :width: 800px
      :alt: 登録画面（Movement-Module紐付）

      登録画面（Movement-Module紐付）

#. | Movement-Module紐付の項目一覧は以下のとおりです。

   .. list-table:: 登録画面項目一覧（Movement-Module紐付）
      :widths: 2 4 1 1 2
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
        - 入力必須
        - 入力方式
        - 制約事項
      * - Movement名
        - | 「:ref:`terraform_cloud_ep_movement_list`」にて登録したMovement名を選択します。
        - ○
        - リスト選択
        - ー
      * - Module素材
        - | 「:ref:`terraform_cloud_ep_module_list`」にて登録したModule素材を選択します。
        - ○
        - リスト選択
        - ー
      * - 備考
        - 自由記述欄です。
        - ー
        - 手動入力
        - 最大長4000バイト

.. _terraform_cloud_ep_nested_variable:

変数ネスト管理
**************

#. | :menuselection:`Terraform Cloud/EP-->変数ネスト管理` では、Module素材集で登録したtfファイルで定義されている変数のタイプがlist,setかつ、その変数の中でlist,set,tuple,objectが定義されている場合、メンバー変数の最大繰返数を閲覧及び更新できます。
   | 本メニューはModule素材集を元に内部機能がレコードを管理するため、登録・廃止・復活はできません。
   | 変数ネストの管理フロー例については「:ref:`terraform_cloud_ep_nested_example`」をご参照ください。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/nested_variable_list_menu.png
      :width: 800px
      :alt: サブメニュー画面（変数ネスト管理）

      サブメニュー画面（変数ネスト管理）

#. | :guilabel:`＋ 更新` ボタンより、最大繰返数の更新を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/nested_variable_list_register.gif
      :width: 800px
      :alt: 登録画面（変数ネスト管理）

      登録画面（変数ネスト管理）

#. | 変数ネスト管理の項目一覧は以下のとおりです。

   .. list-table:: 登録画面項目一覧（変数ネスト管理）
      :widths: 2 4 1 1 2
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
        - 入力必須
        - 入力方式
        - 制約事項
      * - 変数名
        - 「:ref:`terraform_cloud_ep_module_list`」にて登録したModule素材で使用している変数が表示されます。
        - ー
        - 入力不可
        - ー
      * - メンバー変数名（繰返し有）
        - 変数ネスト管理対象がメンバー変数である場合、メンバー変数名が表示されます。メンバー変数名は各階層の変数を「.」で連結して表示します。
        - ー
        - 入力不可
        - ー
      * - 最大繰返数
        - | 配列の最大繰返数を0～99の範囲で入力します。
          | 初期値はtfファイルのdefaultに記載されている値から取得した繰返数が設定されます。
          | tfファイルにdefaultの記載がない場合、1が設定されます。
          | 最終更新者が「Terraform Cloud/EP変数更新機能」でない場合はModule素材の更新により値が変更されることはありません。
        - ー
        - 入力不可
        - ー
      * - 備考
        - 自由記述欄です。
        - ー
        - 手動入力
        - 最大長4000バイト

.. warning::
    | ※初期登録および繰返数の更新はリアルタイムではないので、「:ref:`terraform_cloud_ep_substitution_value_auto_registration_setting`」で変数が扱えるまでに **時間がかかる** 場合があります。

.. _terraform_cloud_ep_substitution_value_auto_registration_setting:

代入値自動登録設定
******************

#. | :menuselection:`Terraform Cloud/EP-->代入値自動登録設定` では、メニュー作成機能で作成したパラメータシート（オペレーションあり）と、Movementの変数を紐付けます。
   | 登録した情報は内部の処理により作業実行時に「:ref:`terraform_cloud_ep_substitution_value_list`」に反映されます。


   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/substitution_value_auto_registration_menu.png
      :width: 800px
      :alt: サブメニュー画面（代入値自動登録設定）

      サブメニュー画面（代入値自動登録設定）

#. | :guilabel:`＋ 登録` ボタンより、代入値自動登録設定の登録を行います。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/substitution_value_auto_registration_register.gif
      :width: 800px
      :alt: 登録画面（代入値自動登録設定）

      登録画面（代入値自動登録設定）

#. | 登録画面の項目一覧は以下のとおりです。

   .. table:: 登録画面項目一覧（代入値自動登録設定）
      :widths: 1 1 1 4 1 1 1
      :align: left

      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | **項目**                          | **説明**                     | **入力\   | **入力方法** | **制約事項**    |
      |                                   |                              | 必須**    |              |                 |
      |                                   |                              |           |              |                 |
      +=================+========+========+==============================+===========+==============+=================+
      | パラメータシー\ | メニューグルー\ | パラメータシート作成機能で\  | ○         | リスト選択   | ー              |
      | ト(From)        | プ:メニュー:項\ | 作成したパラメータシート（\  |           |              |                 |
      |                 | 目              | オペレーションあり）の項目\  |           |              |                 |
      |                 |                 | が表示されます。             |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 |                 | 対象の項目を選択します。     |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | 代入順序        | パラメータシート作成機能で\  | ※1        | 手動入力     | 1～2147483647\  |
      |                 |                 | 作成したパラメータシート（\  |           |              | の整数          |
      |                 |                 | オペレーションあり）のバン\  |           |              |                 |
      |                 |                 | ドルが有効の場合、パラメー\  |           |              |                 |
      |                 |                 | タシートで登録している代入\  |           |              |                 |
      |                 |                 | 順序を入力します。           |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | 登録方式                          | Value型:項目の設定値を紐付\  | ○         | リスト選択   | ー              |
      |                                   | けた変数の具体値とする場合\  |           |              |                 |
      |                                   | に選択します。               |           |              |                 |
      |                                   |                              |           |              |                 |
      |                                   | Key型:項目の名称を紐付けた\  |           |              |                 |
      |                                   | 変数の具体値とする場合に選\  |           |              |                 |
      |                                   | 択します。                   |           |              |                 |
      |                                   |                              |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | Movement名                        | 「:ref:`terraform_cloud_ep\  | ○         | リスト選択   | ー              |
      |                                   | _movement_list`」で登録した\ |           |              |                 |
      |                                   | Movementが表示されます。     |           |              |                 |
      |                                   |                              |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | IaC変数(To)     | Movement名:変数\| 「:ref:`terraform_cloud_ep\  | ○         | リスト選択   | ー              |
      |                 | 名              | _movement_module_link`」で\  |           |              |                 |
      |                 |                 | 登録した資材で使用している\  |           |              |                 |
      |                 |                 | 変数が表示されます。         |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 |                 | 具体値に紐付けたい変数を\    |           |              |                 |
      |                 |                 | 選択します。                 |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | HCL設定         | 「False」または「True」を\   | ○         | リスト選択   | 選択した変数\   |
      |                 |                 | 選択します。                 |           |              | 名がmap型の場\  |
      |                 |                 |                              |           |              | 合は「True」で\ |
      |                 |                 | HCL設定を「True」にすること\ |           |              | 設定する必要が\ |
      |                 |                 | で、変数のタイプを考慮せずに\|           |              | あります。      |
      |                 |                 | パラメータシートの入力値\    |           |              |                 |
      |                 |                 | （具体値）を1:1で設定するこ\ |           |              | 他レコードのオ\ |
      |                 |                 | とができます。               |           |              | ペレーション、\ |
      |                 |                 |                              |           |              | Movement、変数\ |
      |                 |                 | HCL設定を「True」にした場合\ |           |              | 名が一致してい\ |
      |                 |                 | は「メンバー変数」「代入順序\|           |              | る場合、HCL設\  |
      |                 |                 | 」は入力できません。         |           |              | 定の値は同じ値\ |
      |                 |                 |                              |           |              | で統一されて\   |
      |                 |                 | 内部処理により「:ref:`terra\ |           |              | いる必要があり\ |
      |                 |                 | form_cloud_ep_substitution\  |           |              | ます。          |
      |                 |                 | _value_list`」に反映する際\  |           |              |                 |
      |                 |                 | 、選択した値が引き継がれま\  |           |              |                 |
      |                 |                 | す。                         |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | Movement名:変数\| 「:ref:`terraform_cloud_ep\  | ※2        | リスト選択   | ー              |
      |                 | 名:メンバー変数 | _movement_module_link`」で\  |           |              |                 |
      |                 |                 | 登録した資材で使用している\  |           |              |                 |
      |                 |                 | 変数の形式により、メンバー\  |           |              |                 |
      |                 |                 | 変数が表示されます。         |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 |                 | 具体値に紐付けたいメンバー\  |           |              |                 |
      |                 |                 | 変数を選択します。           |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 |                 |                              |           |              |                 |
      |                 +--------+--------+------------------------------+-----------+--------------+-----------------+
      |                 | 代入順序        | 複数具体値が設定できる変数\  | ※3        | 手動入力     | ブランクまたは\ |
      |                 |                 | 名およびメンバー変数の場合\  |           |              | 1～2147483647の\|
      |                 |                 | のみ必須入力になります。     |           |              | 整数            |
      |                 |                 |                              |           |              |                 |
      |                 |                 | 具体値の代入順序（1～ ）を\  |           |              |                 |
      |                 |                 | 入力します。入力値に従い昇\  |           |              |                 |
      |                 |                 | 順で代入されます。           |           |              |                 |
      |                 |                 |                              |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | NULL連携                          | パラメータシートの具体値が\  | ー        | リスト選択   | ー              |
      |                                   | NULL(空白)の場合に、代入値\  |           |              |                 |
      |                                   | 管理への登録をNULL(空白)の\  |           |              |                 |
      |                                   | 値で行うか設定します。       |           |              |                 |
      |                                   |                              |           |              |                 |
      |                                   | ・「有効」の場合、パラメー\  |           |              |                 |
      |                                   | タシートの値がどのような値\  |           |              |                 |
      |                                   | でも代入値管理への登録が行\  |           |              |                 |
      |                                   | われます。                   |           |              |                 |
      |                                   |                              |           |              |                 |
      |                                   | ・「無効」の場合、パラメー\  |           |              |                 |
      |                                   | タシート に値が入 っている\  |           |              |                 |
      |                                   | 場合のみ代入値管理への登録\  |           |              |                 |
      |                                   | が行われます。               |           |              |                 |
      |                                   |                              |           |              |                 |
      |                                   | ・空白の場合「:ref:`terrafo\ |           |              |                 |
      |                                   | rm_cloud_ep_interface_info\  |           |              |                 |
      |                                   | rmation`」で設定されている\  |           |              |                 |
      |                                   | 「NULL連携」の値が適用され\  |           |              |                 |
      |                                   | ます。                       |           |              |                 |
      |                                   |                              |           |              |                 |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+
      | 備考                              | 自由記述欄です。             | ー        | 手動入力     | 最大長\         |
      |                                   |                              |           |              | 4000バイト      |
      +-----------------+--------+--------+------------------------------+-----------+--------------+-----------------+

| ※1:パラメータシートのバンドルが有効の場合のみ必須。
| ※2:選択した「Movement名:変数名」のメンバー変数が存在する場合は必須し、かつ「HCL設定」が「False」の場合のみ必須。
| ※3:選択した「Movement名:変数名」および「Movement名:変数名:メンバー変数」が代入順序を必要とする形式である場合のみ必須。

.. note:: | **バンドルが有効なパラメータシートの場合**
   | バンドルが有効なパラメータシートの項目とMovementの変数を紐付ける場合、 :menuselection:`Terraform Cloud/EP-->代入値自動登録設定` でパラメータシート(From) の代入順序を入力する必要があります。
   | バンドルが有効なパラメータシートと代入値自動登録設定の関係を以下の図に示します。

   .. figure:: /images/ja/diagram/parameter_no_host.png
      :width: 600px
      :alt: バンドルが有効なパラメータシート使用時の代入値自動登録設定登録方法

      バンドルが有効なパラメータシート使用時の代入値自動登録設定登録方法

.. note:: | **IaC変数(To)のメンバー変数の設定について**
   | 変数のタイプがobject, tupleの場合に設定する必要があります。
   | メンバー変数を設定する場合は、同じ変数内のメンバー変数の具体値も全て設定してください。
   | 代入値を設定しなかった他のメンバー変数でもデフォルト値が使用されることはありません。
   | 詳細及び具体例は「:ref:`terraform_common_variable_type`」の「※1 …メンバー変数対象」を参照してください。

.. note:: | **IaC変数(To)の代入順序について**
   | 変数のタイプがlist, setの場合に設定する必要があります。
   | 詳細及び具体例は「:ref:`terraform_common_variable_type`」の「※2 …代入順序対象」を参照してください。


.. _terraform_cloud_ep_execution:

作業実行
********

| :menuselection:`Terraform Cloud/EP-->作業実行` では作業の実行を指示します。
| Movement一覧、オペレーション一覧からそれぞれラジオボタンで選択し、 :guilabel:`作業実行` ボタンを押すと、「:ref:`terraform_cloud_ep_check_operation_status`」に遷移し、実行されます。

.. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/execution_menu.gif
   :width: 800px
   :alt: サブメニュー画面（作業実行）

   サブメニュー画面（作業実行）

#. | **予約日時の指定**
   | 「予約日時」を入力することで、実行およびPlan確認を予約することができます。
   | 「予約日時」には、未来の日時のみ登録可能です。

#. | **Movementの指定**
   | 「:ref:`terraform_cloud_ep_movement_list` 」で登録したMovementを選択します。

#. | **オペレーションの指定**
   | 「:ref:`terraform_cloud_ep_operation_list`」で登録したオペレーションを選択します。

#. | **実行**
   | 「実行」ボタンをクリックすると、「5.2.10作業状態確認 」に遷移し、作業が実行されます。
   | Terraform Plan完了後にTerraform Applyが自動で実行されます。

#. | **Plan確認**
   | 「Plan確認」ボタンをクリックすると、「実行」ボタンをクリックした場合同様に作業実行が開始されますが、Terraform Planのみを実行し、Terraform Applyは実行されません。

#. | **パラメータ確認**
   | 「パラメータ確認」ボタンをクリックすると、投入するパラメータの値を確認できます。Terraform PlanおよびTerraform Applyは実行されません。

.. tip:: | **Outputブロックについて**
   | Outputブロックを含むModule素材を利用した作業ががConductorから実行された場合、Outputブロックに書かれた内容がConductor作業ディレクトリパスにjson形式ファイルで保存されます。
   | このファイルを使用することにより、同一Conductorの別のMovementでTerraformが出力した値を使用することができます。

   | **ファイルパス**
   | [Conductor作業ディレクトリパス]/[ConductorインスタンスID]/terraform_output_[作業No.].json
   | Conductor作業ディレクトリパス・・・Ansible ITA独自変数のデータ連携のConductor作業ディレクトリパス
   | ConductorインスタンスID・・・「:ref:`conductor_conductor_job_list`」のconductorインスタンスID
   | 作業No.・・・「:ref:`terraform_cloud_ep_execution_list`」の作業No.

   | 記述例

   +----------------------------------+
   | variable "VAR_sample" {          |
   |                                  |
   | 　type = string                  |
   |                                  |
   | 　default = "sample_string"      |
   |                                  |
   | }                                |
   |                                  |
   | output "output_sample" {         |
   |                                  |
   | 　value = "${var.VAR_sample}"    |
   |                                  |
   | }                                |
   +----------------------------------+

   | 出力例

   +----------------------------------+
   | {                                |
   |                                  |
   | 　"output_sample": {             |
   |                                  |
   | 　　"sensitive": false,          |
   |                                  |
   | 　　"type": "string",            |
   |                                  |
   | 　　"value": "sample_string"     |
   |                                  |
   | 　}                              |
   |                                  |
   | }                                |
   +----------------------------------+

.. _terraform_cloud_ep_check_operation_status:

作業状態確認
************

| :menuselection:`Terraform Cloud/EP-->作業状態確認` では作業の実行状態を監視します。

.. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/operation_status_menu.png
   :width: 800px
   :alt: サブメニュー画面（作業状態確認）

   サブメニュー画面（作業状態確認）


#. | **実行状態表示**
   | 実行状況に即し、ステータスが表示されます。
   | また、実行ログ、エラーログに実行状況の詳細が表示されます。
   | 「実行種別」にはPlan確認の場合には「Plan確認」、Workspaceごとに構成・管理されたリソースの削除（「:ref:`terraform_cloud_ep_workspace_list`」から実行されます。）の場合は「リソース削除」、それ以外の場合には「通常」が入ります。   
   | ステータスが想定外エラーで終了した場合、「:ref:`terraform_cloud_ep_interface_information`」の登録不備や、「:ref:`terraform_cloud_ep_organization_list`」「:ref:`terraform_cloud_ep_workspace_list`」でのTerraformとの連携（登録）がされていない、あるいはその他のWebコンテンツの登録不備が原因であれば、エラーログにメッセージが表示されます。
   | それ以外のエラーの場合はエラーログにメッセージが表示されません。この場合は、アプリケーションログにエラー情報が記録されます。必要に応じてアプリケーションログを確認ください。
   | 「呼出元Conductor」には、どのConductorから実行されたかを表示します。Terraform Cloud/EP driver から直接実行した場合は空欄になります。
   | 「実行ユーザ」には、作業実行メニューより「実行」ボタンを押下した際のログインユーザが表示されます。
   | 「Terraform利用情報」に表示される「RUN-ID」はTerraform側で管理する実行管理のIDで、内部機能によるTerraformとの連携処理の際に利用されます。

   | ※「実行種別」が「リソース削除」の場合は下記の項目が設定されません。
   - 呼出元Conductor
   - Movement
   - オペレーション
   - 投入データ

#. | **代入値確認**
   | :guilabel:`代入値確認` ボタンで「:ref:`terraform_cloud_ep_substitution_value_list`」が表示され、作業対象のオペレーションとMovementに絞り込んだ代入値が表示されます。


#. | **緊急停止/予約取り消し**
   | :guilabel:`緊急停止` ボタンで構築作業を停止させることができます。
   | また、実行前の「予約実行」の作業の場合は、 :guilabel:`予約取消` ボタンが表示されます。 :guilabel:`予約取消` ボタンで予約実行が取り消せます。

#. | **実行ログ表示**
   | 実行ログのプルダウンに表示されるログファイル名は以下の3種類があります。
   | plan.log: Terraform Plan の実行ログ
   | policyCheck.log: Terraform Policy Checkの実行ログ
   | apply.log: Terraform Applyの実行ログ

#. | **ログ検索**
   | 実行ログ、エラーログは、フィルタリングができます。
   | 各ログのフィルタのテキストボックスに検索したい文字列を入力し、「該当行のみ表示」のチェックボックスをチェックすることで該当する行だけが表示されます。
   | 実行ログ、エラーログのリフレッシュ表示間隔と最大表示行数を、「:ref:`terraform_cloud_ep_interface_information`」の「状態監視周期（単位ミリ秒）」と「進行状態表示行数」で設定できます。


#. | **投入データ**
   | 実行したModule素材、Policy素材および設定した代入値の一覧をjson形式で取得したファイルを格納したzip形式ファイルをダウンロードすることができます。
   | 格納されているファイルは以下の通りです。

   .. list-table:: 投入データ格納ファイル
      :widths: 2 2 6
      :header-rows: 1
      :align: left

      * - フォルダ名
        - ファイル名
        - 説明
      * - ー
        - | （投入したModule素材ファイル名）
        - | 投入したModule素材ファイルがzipファイルの直下にすべて格納されます。
      * - ー
        - | （投入したPolicyファイル名）
        - | 投入したModule素材ファイルがzipファイルの直下にすべて格納されます。
      * - variables
        - | variables.json
        - | 設定した各代入値についての「変数名(key)」「具体値(value)」「HCL設定」「Sensitive設定」の設定値をjson形式で取得したファイルです。
          | Sensitive設定がON(true)の場合は具体値にはnullが設定されます。

#. | **結果データ**
   | 実行ログ、エラーログおよび、Terraformが生成したstateファイルを格納したzip形式ファイルをダウンロードすることができます。
   | 格納されているファイルは以下の通りです。

   .. list-table:: 結果データ格納ファイル
      :widths: 2 2 6
      :header-rows: 1
      :align: left

      * - フォルダ名
        - ファイル名
        - 説明
      * - ー
        - | plan.log
        - | 実行ログ(plan.log)出力された内容を記載したlogファイルです。
      * - ー
        - | policyCheck.log
        - | 実行ログ(policyCheck.log)出力された内容を記載したlogファイルです。
      * - ー
        - | apply.log
        - | 実行ログ(apply.log)出力された内容を記載したlogファイルです。
      * - ー
        - | error.log
        - | エラーログ出力された内容を記載したlogファイルです。
      * - ー
        - | sv-XXXXXX.tfstate
        - | Terraformが生成したstateファイルです。ファイル名はTerraformが作成するため、実行毎に異なります。
          | バックアップ用途として、暗号化された状態で保存されています。

.. _terraform_cloud_ep_execution_list:

作業管理
********

#. | :menuselection:`Terraform Cloud/EP-->作業管理` では作業の履歴を閲覧できます。
   | 条件を指定し :guilabel:`フィルタ` ボタンをクリックすると、作業一覧テーブルを表示します。
   | :guilabel:`詳細` ボタンで :ref:`terraform_cloud_ep_check_operation_status` に遷移し、実行状態の詳細を見ることができます。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/execution_list_menu.png
      :width: 800px
      :alt: サブメニュー画面（作業管理）

      サブメニュー画面（作業管理）

#. | 作業管理画面の項目一覧は以下のとおりです。

   .. table:: 画面項目一覧（作業管理）
      :widths: 1 1 1 4
      :align: left

      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | **項目**                          | **説明**                                                                  |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +=================+========+========+===========================================================================+
      | 作業No.                           | 作業実行時に自動採番した36桁の文字列が表示されます。                      |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 詳細                              | ボタンを押下することで「:ref:`terraform_cloud_ep_check_operation_status`\ |
      |                                   | 」に遷移し、実行状態の詳細を確認できます。                                |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 実行種別                          | 作業実行時の実行種別が表示されます。                                      |
      |                                   |                                                                           |
      |                                   | 「通常」「Plan確認」「パラメータシート確認」があります。                  |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | ステータス                        | 作業実行のステータスが表示されます。                                      |
      |                                   |                                                                           |
      |                                   | 「未実行」「未実行(予約)」「準備中」「実行中」「実行中(遅延)」「完了」\   |
      |                                   | 「完了(異常)」「想定外エラー」「緊急停止」「予約取り消し」があります。    |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 実行ユーザ                        | 作業実行を行ったユーザ名が表示されます。                                  |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 登録日時                          | 作業を登録した日時が表示されます。                                        |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | Movement        | ID              | MovementのIDが表示されます。                                              |
      |                 |                 |                                                                           |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | 名称            | Movementの名称が表示されます。                                            |
      |                 |                 |                                                                           |
      |                 |                 |                                                                           |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | 遅延タイマー    | Movementに設定した遅延タイマーの値が表示されます。                        |
      |                 |                 |                                                                           |
      |                 |                 |                                                                           |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | Terraf\| Work\  | Movementに設定したTerraform WorkspaceのIDが表示されます。                 |
      |                 | orm利\ | space\ |                                                                           |
      |                 | 用情報 | ID     |                                                                           |
      +                 |        +--------+---------------------------------------------------------------------------+
      |                 |        | Organi\| Movementに設定した（Terraform Organizationに紐づく）Terraform Workspace\  |
      |                 |        | zation\| の名称が表示されます。                                                    |
      |                 |        | :Works\|                                                                           |
      |                 |        | pace   |                                                                           |
      |                 |        |        |                                                                           |
      +                 |        +--------+---------------------------------------------------------------------------+
      |                 |        | RUN-ID | 連携先Terraformで管理されるRUNのIDが表示されます。                        |
      |                 |        |        |                                                                           |
      |                 |        |        |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | オペレーション  | No.             | オペレーションのNo.が表示されます。                                       |
      |                 |                 |                                                                           |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | 名称            | オペレーションの名称が表示されます。                                      |
      |                 |                 |                                                                           |
      |                 |                 |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 投入データ                        | 投入データ一式をzipファイル形式でダウンロードできます。                   |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 結果データ                        | 結果データ一式をzipファイル形式でダウンロードできます。                   |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 作業状況        | 予約日時        | 予約実行をしていた場合、予約日時が表示されます。                          |
      |                 |                 |                                                                           |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | 開始日時        | 作業の開始日時が表示されます。                                            |
      |                 |                 |                                                                           |
      |                 |                 |                                                                           |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | 終了日時        | 作業の終了日時が表示されます。                                            |
      |                 |                 |                                                                           |
      |                 |                 |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 備考                              | 自由記述欄です。                                                          |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+

.. _terraform_cloud_ep_substitution_value_list:

代入値管理
**********

#. | :menuselection:`Terraform Cloud/EP-->代入値管理` では、オペレーションに紐付くMovementで利用されるModule素材の変数に代入する具体値を閲覧できます。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/substitution_value_list_menu.png
      :width: 800px
      :alt: サブメニュー画面（代入値管理）

      サブメニュー画面（代入値管理）


#. | 代入値管理画面の項目一覧は以下のとおりです。

   .. table:: 画面項目一覧（代入値管理）
      :widths: 1 1 1 4
      :align: left

      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | **項目**                          | **説明**                                                                  |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +=================+========+========+===========================================================================+
      | 作業No.                           | 作業実行時に自動採番した36桁の文字列が表示されます。                      |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | オペレーション                    | 作業実行時に選択したオペレーションが表示されます。                        |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | Movement名                        | 作業実行時に選択したMovementが表示されます。                              |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | Movement名:変数名                 | 「:ref:`terraform_cloud_ep_substitution_value_auto_registration_setting`\ |
      |                                   | 」で選択されたMovementにアタッチした変数名が表示されます。                |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | HCL設定                           | 「:ref:`terraform_cloud_ep_substitution_value_auto_registration_setting`\ |
      |                                   | 」で選択されたHCL設定「False」または「True」が表示されます。              |
      |                                   | また、「メンバー変数」「代入順序」を入力した階層構造となっている変数\     |
      |                                   | は「True」となります。                                                    |
      |                                   |                                                                           |
      |                                   | 「True」の場合、連携先Terraformに登録されるVariablesのHCL設定が有効\      |
      |                                   | になります。                                                              |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | Movement名:変数名:メンバー変数    | 「:ref:`terraform_cloud_ep_substitution_value_auto_registration_setting`\ |
      |                                   | 」で選択されたMovementにアタッチしたメンバー変数名が表示されます。        |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 代入順序                          | 「:ref:`terraform_cloud_ep_substitution_value_auto_registration_setting`\ |
      |                                   | 」で選択されたMovementにアタッチした変数名およびメンバー変数に対する\     |
      |                                   | 代入順序が表示されます。                                                  |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 具体値          | Sensitive設定   | 「True」または「False」が表示されます。                                   |
      |                 |                 |                                                                           |
      |                 |                 | 「True」の場合、連携先Terraformに登録されるVariablesのSensitive設定が\    |
      |                 |                 | 有効になります。                                                          |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | 値              | オペレーション/Movementで使用する変数の具体値が表示されます。             |
      |                 |                 |                                                                           |
      |                 |                 |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 備考                              | 自由記述欄です。                                                          |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+

.. _terraform_cloud_ep_linked_terraform_management:

連携先Terrraform管理
********************

#. | :menuselection:`Terraform Cloud/EP-->連携先Terrraform管理` では「:ref:`terraform_cloud_ep_interface_information`」に登録した情報をもとにTerraformへ接続し、Terraformに登録されているOrganizaiton/Workspace/Policy/ Policy setの一覧をそれぞれ表示できます。
   | 表示された一覧からITAに登録されている対象を、Terraformから削除することができます。
   | Workspaceごとに構成・管理されたリソースの削除を実行することができます。
   | また、Policy setに紐付いたWorkspaceおよびPolicyの紐付けを解除することができます。
   | ※このページ上で行う操作について、ITA側の登録対象に影響はありません。

   .. figure:: /images/ja/terraform_cloud_ep_driver/operation_method_explanation/linked_terraform_management.gif
      :width: 800px
      :alt: サブメニュー画面（連携先Terrraform管理）

      サブメニュー画面（連携先Terrraform管理）

#. | 各一覧取得により表示される項目一覧は以下の通りです。

   .. list-table:: 項目一覧（Organization登録管理）
      :widths: 2 8
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
      * - Organization Name
        - Terraformに登録されているOrganizationの名前です。
      * - Email address
        - Organizationに登録されているEmail addressです。
      * - ITAの登録状態
        - 対象のOrganization Nameが「:ref:`terraform_cloud_ep_organization_list`」に登録されている場合は「登録済み」と表示されます。登録されていない場合は「未登録」と表示されます。
      * - 削除
        - | ボタンをクリックすると確認ダイアログが表示され[OK]をクリックすると対象のOrganizationが連携先Terraform上から削除されます
          | ※削除したOrganizationは元に戻すことができません。 

   .. list-table:: 項目一覧（Workspace登録管理）
      :widths: 2 8
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
      * - Organization Name
        - 対象のWorkspaceと紐付いているOrganizationの名前です。
      * - Workspace Name
        - Terraformに登録されているWorkspaceの名前です。
      * - ITAの登録状態
        - 対象のOrganization Nameが「:ref:`terraform_cloud_ep_workspace_list`」に登録されている場合は「登録済み」と表示されます。登録されていない場合は「未登録」と表示されます。
      * - リソース削除
        - | ボタンをクリックすると確認ダイアログが表示され[OK]をクリックすると「:ref:`terraform_cloud_ep_check_operation_status`」に遷移し、対象のWorkspaceごとに構成・管理されたリソースの削除が実行されます。
          | ※削除したリソースは元に戻すことができません。 
      * - 削除
        - | ボタンをクリックすると確認ダイアログが表示され[OK]をクリックすると対象のWorkspaceが連携先Terraform上から削除されます。
          | ※Workspaceを削除するとリソースの削除は実行することができません。また、削除したWorkspaceは元に戻すことができません。

   .. list-table:: 項目一覧（Policy登録管理）
      :widths: 2 8
      :header-rows: 1
      :align: left

      * - 項目
        - 説明
      * - Organization Name
        - 対象のPolicyと紐付いているOrganizationの名前です。
      * - Policy Name
        - Terraformに登録されているPolicyの名前です。
      * - ITAの登録状態
        - 対象のPolicy Nameが「:ref:`terraform_cloud_ep_policy_list`」に登録されている場合は「登録済み」と表示されます。登録されていない場合は「未登録」と表示されます。
      * - Policy Codeをダウンロード
        - ボタンをクリックすると対象のPolicyのPolicyCodeファイルをダウンロードできます。
      * - 削除
        - | ボタンをクリックすると確認ダイアログが表示され[OK]をクリックすると対象のPolicyがTerraform上から削除されます。
          | ※削除したPolicyは元に戻すことができません。

   .. table:: 項目一覧（PolicySet登録管理）
      :widths: 1 1 1 7
      :align: left

      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | **項目**                          | **説明**                                                                  |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +=================+========+========+===========================================================================+
      | Organization Name                 | 対象のPolicySetと紐付いているOrganizationの名前です。                     |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | Policy Set Name                   | 対象のPolicySetの名前です。                                               |
      |                                   |                                                                           |
      |                                   |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 紐付Workspace   | Workspace Name  | 対象のPolicy setに紐付いているWorkspaceの名前です。                       |
      |                 |                 |                                                                           |
      |                 |                 |                                                                           |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | ITAの登録状態   | 対象のPolicy Set NameとWorkspace Nameが「:ref:`terraform_cloud_ep_policy\ |
      |                 |                 | set_workspace_link`」に登録されている場合は「登録済み」と表示されます。\  |
      |                 |                 | 登録されていない場合は「未登録」と表示されます。                          |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | 紐付解除        | ボタンをクリックすると確認ダイアログが表示され[OK]をクリックすると\       |
      |                 |                 | 対象のPolicy setとWorkspaceの紐付けが解除されます。                       |
      |                 |                 |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 紐付Policy      | Policy Name     | 対象のPolicy setに紐付いているPolicyの名前です。                          |
      |                 |                 |                                                                           |
      |                 |                 |                                                                           |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | ITAの登録状態   | 対象のPolicy Set NameとPolicy Nameが「:ref:`terraform_cloud_ep_policy\    |
      |                 |                 | set_policy_link`」に登録されている場合は「登録済み」と表示されます。\     |
      |                 |                 | 登録されていない場合は「未登録」と表示されます。                          |
      +                 +--------+--------+---------------------------------------------------------------------------+
      |                 | 紐付解除        | ボタンをクリックすると確認ダイアログが表示され[OK]をクリックすると\       |
      |                 |                 | 対象のPolicy setとPolicyの紐付けが解除されます。                          |
      |                 |                 |                                                                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | ITAの登録状態                     | 対象のPolicy Set Nameが「:ref:`terraform_cloud_ep_policyset_list`」に\    |
      |                                   | 登録されている場合は「登録済み」と表示されます。登録されていない場合は\   |
      |                                   | 「未登録」と表示されます。                                                |
      +-----------------+--------+--------+---------------------------------------------------------------------------+
      | 削除                              | ボタンをクリックすると確認ダイアログが表示され[OK]をクリックすると\       |
      |                                   | 対象のPolicy setが連携先Terraformから削除されます。                       |
      |                                   |                                                                           |
      |                                   | ※削除したPolicy setは元に戻すことができません。                           |
      +-----------------+--------+--------+---------------------------------------------------------------------------+



